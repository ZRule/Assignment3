<html>
	<head>
	<meta charset="UTF-8">
		<script>
		
		
		
		
		</script>
	</head>
	
	<body>
	
    <script>
    var appointmentArr = new Array();
    var priorityArr = new Array();
    var subjectArr = new Array();
    var venueArr = new Array();
    //var dateArr = new Array();
    var startArr = new Array();
    var endArr = new Array();
    var i = 0;
    var rightDateArr = new Array();
    
    function addAppointment(){
      if (isValidDate(document.getElementById('date').value) && (isValidTime())){
        appointmentArr.push(appointmentArr.length);
        if (document.getElementById('radioOne').checked)
          { priorityArr.push('High');
          }
        else
          { priorityArr.push('Low');
          }
        subjectArr.push(document.getElementById('subject').value);
        venueArr.push(document.getElementById('venue').value);
        rightDateArr.push(document.getElementById('date').value);
        startArr.push(document.getElementById('startTime').value);
        endArr.push(document.getElementById('endTime').value);
        showAppointments();
        }
      else{ return;
        }
      }
    function shuffleAppointments() {
	        
                var i = 0;
                var j = 0;
                temp = null;
                for (i = appointmentArr.length - 1; i > 0; i -= 1) {
                j = Math.floor(Math.random() * (i + 1))
                temp = appointmentArr[i]
                appointmentArr[i] = appointmentArr[j]
                appointmentArr[j] = temp
                } 
                
            }
     function isValidDate(input)  {
                    const CORRECTMONTH = [1,2,3,4,5,6,7,8,9,10,11,12]
                    const SMALLMONTH = [4,6,9,11]
                    const BIGMONTH = [1,3,5,7,8,10,12]
                    
                    var dateArr = new Array();
                    var correctDate = 0;
                    var daysInMonth = 0 ;
                    var month = 0 ;
                    var day = 0 ;
                    var year = 0 ;
                    var getDate = "";
                    //var moreDate = true;
                    //while (moreDate) {
                    getDate = input;
                    dateArr = getDate.split("/");
                    alert (dateArr);
                    if ((CORRECTMONTH.indexOf(parseInt(dateArr[1]))) == -1 || (SMALLMONTH.indexOf(parseInt(dateArr[1])) && (parseInt(dateArr[0]) > 30)) 
                        || (BIGMONTH.indexOf(parseInt(dateArr[1])) && (parseInt(dateArr[0]) > 31)) || 
                        ((parseInt(dateArr[2]) % 4 == 0) && (parseInt(dateArr[0]) > 29 )) || ((parseInt(dateArr[2]) % 4 != 0) && (parseInt(dateArr[0]) > 28)) 
                        || ((parseInt(dateArr[2]) % 100 == 0) && (parseInt(dateArr[0]) > 28)) || (parseInt(dateArr[2]) < 1583)
                        || (new Date(dateArr[2],(dateArr[1]-1),dateArr[0],document.getElementById('startTime').value) <= new Date())) {
                            alert("please enter a correct date");
                            return false   
                        }
                        else{
                        rightDateArr.push(input);
                        return
                        }
                        //moreDate = confirm("would you like to add another date?");
                    //}
                //return rightDateArr;            
                }
            /*function prompt_for_date(reenter) {
                        if (reenter == 1){
                            rightDate = alert("please enter a correct date");
                        }else {
                            rightDate = document.getElementById('date').value;
                        }
                        dateArr = rightDate.split("/");
                        return (dateArr);
            }        
            //alert(rightDateArr);*/
            function isValidTime(){
                    
                    var start = "";
                    var end = "";
                    
                    start = parseInt(document.getElementById('startTime').value);
                    end = parseInt(document.getElementById('endTime').value);
                    
                        if (start >= end || end <= start) {
                            alert ('invalid time');
                            return false;
                        }else{
                            return true;
                        }
                        }
      function isConcurrentAppointment(array){
			var i;
			//var dateArray = new Array();
			//var startArray = new Array();
			//var endArray = new Array();
			
			
			if(array.length>0){
				for(i=0; i<rightDateArr.length-1; i++){
					if(document.getElementById('date').value===rightDateArr[i]){
						if(document.getElementById('endTime').value>startArr[i]){
							alert('error: concurrent dates');
							return false;
						}
					}
				}
			}
		return true;
		}
	
    </script>
	
	<div align="middle" >
    <h1 align="middle">Personal Diary</h1>
    <p />
    Priority:
    <input type="radio" id="radioOne" name="priority" checked/>High
    <input type="radio" id="radioTwo" name="priority" />Low
    <p />
    Subject:
    <input type="text"  id="subject" size="50" value="subject" />
    <p />
    Venue:
    <input type="text" id="venue" size="50" />
    <p />
    Date:
    <input type="text" id="date" size="10" />
    Start Time
    <select id="startTime">
      <option value="8">0800</option>
      <option value="9">0900</option>
      <option value="10">1000</option>
      <option value="11">1100</option>
      <option value="12">1200</option>
      <option value="13">1300</option>
      <option value="14">1400</option>
      <option value="15">1500</option>
      <option value="16">1600</option>
      <option value="17">1700</option>
      <option value="18">1800</option>
    </select>
    End Time
    <select id="endTime">
      <option value="8">0800</option>
      <option value="9">0900</option>
      <option value="10">1000</option>
      <option value="11">1100</option>
      <option value="12">1200</option>
      <option value="13">1300</option>
      <option value="14">1400</option>
      <option value="15">1500</option>
      <option value="16">1600</option>
      <option value="17">1700</option>
      <option value="18">1800</option>
    </select>
    <p />
    <input type="button" value="Add Appointment" onclick="addAppointment()"/>
    <hr />
	</div>
	<div>
	
    <table id="appTable" border="1">
    <tr>
    <th>Priority</th>
    <th>Date</th>
    <th>Start</th>
    <th>End</th>
    <th>Subject</th>
    <th>Venue</th>
    </tr>
    </table>
    <input type="button" value="Randomise Appointments" onclick="shuffleAppointments()"/>
    <input type="button" value="Sort Appointments" onclick="addAppointment()"/>
    by <select id="sort">
      <option value="priority">Priority</option>
      <option value="date">Date</option>
      <option value="start">Start</option>
      <option value="end">End</option>
      <option value="subject">Subject</option>
      <option value="venue">Venue</option>
     </select>
    <hr />
    <script>
    function showAppointments(){
      var table = document.getElementById("appTable");
      var row = table.insertRow(1);
      var cell1 = row.insertCell(0);
      var cell2 = row.insertCell(1);
      var cell3 = row.insertCell(2);
      var cell4 = row.insertCell(3);
      var cell5 = row.insertCell(4);
      var cell6 = row.insertCell(5);
      for (i=0;i<appointmentArr.length;i++){
        cell1.innerHTML = priorityArr[i];
        cell2.innerHTML = rightDateArr[i];
        cell3.innerHTML = startArr[i];
        cell4.innerHTML = endArr[i];
        cell5.innerHTML = subjectArr[i];
        cell6.innerHTML = venueArr[i];
      }
    }
	</script>
	</div>
	</body>
</html>